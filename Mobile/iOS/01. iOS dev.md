# iOS

### Особенности мобильных приложений

Особенность мобильного приложения - оно работает, занимая весь экран для пользователя.

---

### Паттерн MVC в разработке для iOS

В разработке для iOS часто применяется паттерн MVC:

* _View_ - __Component__ (название в iOS-разработке) - компонент есть элемент пользовательского интерфейса (напр., кнопка)

* _Model_ - __DataSource__ - предоставляет данные для приложения

* _Controller_ - __Delegate__ - управляет потоком данных в приложении и тем, какое представление отобразить на экране.

--- 

###  Обработка событий

__Action__ - действие; оно вызывается, например, при нажатии на кнопку.

Чтобы связать поведение и пользовательское действие, в Objective-C __Event__'ы связываются с __IBAction__'ами (IB = Interface Builder). __IBAction__ - это код, который вызывается в ответ на __Event__.

Контрол имеет 1 или более __Event__, запускающихся в ответ на что-то происходящее (типа клика).

__IBOutlet__ - индикатор для свойства класса, который сообщает Interface Builder'у, что оно указывает на UI контрол.

Как написать Action?

У класса есть 2 части - 
* `.h` - файл интерфейса класса (публичные поля и методы класса)
* `.m` - файл реализации класса.

У __*View*__ -> __*View Controller*__. View Controller объект задает программную логику для представления. Он обычно содержит ссылки на контролы, логику обработки их событий, и логику переходов между представлениями экранов.

Нажатие по кнопке (то, что пользователь поднял палец внутри кнопки) называется событием "Touch Up Inside".

Обработка нажатия на кнопку (на которой написано "Post it!"):

```objectivec
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad {
    [super viewDidLoad];
}
- (IBAction)postItButtonPressed:(id)sender {
    NSLog(@"Post It button was pressed!");
}

@end

```

Как получить текст, написанный внутри редактируемого текстового элемента, в методе обработки нажатия на кнопку Post it? Через переменную, ссылающуюся на TextView и запрос текста по этой переменной. Для таких переменных в Objective-C есть конструкция, называемая __*свойством*__. Оно определяется в `.h` файле.

```objectivec
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController
@property (weak, nonatomic) IBOutlet UITextView *tweetTextView;

@end
```

Заметим, что вы присоединяете ваши контролы к аутлетам (см. `IBOutlet`). Аутлет говорит о том, что он указывает на данный `UITextView`. 

Аутлеты ссылаются на что-то в UI. Аутлеты используются для того, чтобы работать с интерфейсом или представлять или получать информацию от пользователя.

`IBAction` - это нажатие на кнопку, а доступ к тексту - через `IBOutlet`. 

После этого можно модифицировать обработку нажатия:

```objectivec
- (IBAction)postItButtonPressed:(id)sender {
    NSLog(@"Post It button was pressed: %@", self.tweetTextView.text);
}
```

---

### UI layout

`*.storyboard` - это XML-файлы, задающие внешний вид экранов приложения и переходы между экранами. `*.xib` - их предыдущее название.

---

### Приложения для смартфонов и планшетов

Приложение для iPhone и iPad = "Universal app"

---

### Фреймворки

iOS 6: появление фреймворков для работы с Twitter и Facebook.

---

# Язык Objective-C

@ перед строкой в Objective-C - это сокращение инициализации объекта `NSString`.

## Свойства (properties)

Свойства обрабатывают создание геттеров и сеттеров. Использование `@property` в хедер-файле указывает компилятору, что мы имеем свойство. В современном Objective-C свойства синтезируются автоматически - вам больше не нужно писать `@synthesize` в файле реализации. В случае синтезированного свойства компилятор сгенерирует геттер, и если это свойство для чтения/записи, и сеттер; и реализует его, основываясь на атрибуте `@property`, объявленном в хедер-файле.

При реализации ARC (_Automatic Reference Counting_), Apple переместила большую часть работы по управлению памятью в при разработке для iOS из кода в компилятор. `@synthesize` использовалось для создания переменной в файле реализации из начала этого процесса. Теперь компилятор делает это за вас.

Свойство для текстового контрола, содержащего текст твита:

```objectivec
@property (weak, nonatomic) IBOutlet UITextView *tweetTextView;
```

Свойство может быть read-only. Сеттера при этом не будет.