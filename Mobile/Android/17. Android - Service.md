# Android 

## Service

Сервисы позволяют выполнять вашу задачу в фоне. Результат работы над задачей можно передать в главный поток, в Активити / Фрагмент.

Сервис даёт возможность работать приложению в фоне. Это очень важно.

Что такое задача, работающая в фоне? Это задача, для которой не нужен пользовательский интерфейс.

__Примеры__ таких задач:

* Синхронизация данных (с сервером)
* Периодические действия
* Долгосрочные действия (например, скачивание фильма - по завершению закачки UI может уже не быть)

Еще конкретнее - 

Приложение, которое отображает состояние погоды, исходя из местоположения устройства,
периодическая синхронизация, автозагрузка. Каждые 5 минут ходит на сервер и обновляет погоду; если UI открыт -- обновить его, если нет -- сохранить данные в БД и даже сохранить задачу после перезагрузки ОС при незапущенном приложении.

---

Какие есть альтернативы Сервисам? Это уже известные

* Handler
* AsyncTask
* Loaders
* Rx

Может, стоит использовать эти средства? И почему они не столь хороши в данном случае (либо полностью не подходят).

### Альтернатива 1: Handler

Можно гонять `Handler` в `Application`'e.

Создаем `HandlerThread` (уже рассматривали этот способ работать в фоне и передавать сообщения), кладем его в `Application`, чтобы до него можно было достучаться откуда угодно.

---

Что можно сделать с Service

* `startService(Intent)` / `stopService(Intent)`
* `bindService(Intent)` - можно прибиндиться (__?__ к чему __?__).
* `startForeground(int, Notification)` - Foreground Service - это "сервис с UI"

Запущенный Service не означает бессмертный процесс. Система может его "убить".

Примеры неудачного использования Service - другая ошибка начинающего - сделать сервисы центром приложения и всё делать через них.

1. Прогонять всё через `Service.onStartCommand(Intent)`
2. Использование Bound Service в том же процессе


__Рекомендация__: не стройте приложение вокруг Service

Пример удачного использования Service

Service как флаг, связанный с состоянием операций в `j.u.c.Executor`
